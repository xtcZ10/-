 <!DOCTYPE html>
 <html lang="zh-CN">
 <head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title>精美计算器</title>
     <style>
         body {
             font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
             display: flex;
             justify-content: center;
             align-items: center;
             min-height: 100vh;
             background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
             margin: 0;
             padding: 20px;
         }
         
         .calculator {
             width: 320px;
             background: white;
             border-radius: 20px;
             box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
             overflow: hidden;
             border: 1px solid #e0e0e0;
         }
         
         .display {
             padding: 20px;
             text-align: right;
             background: #f8f9fa;
             border-bottom: 1px solid #e0e0e0;
         }
         
         .previous-operand {
             font-size: 1.2rem;
             color: #777;
             height: 24px;
             overflow: hidden;
         }
         
         .current-operand {
             font-size: 2.5rem;
             font-weight: 300;
             margin-top: 5px;
             overflow: hidden;
             text-overflow: ellipsis;
         }
         
         .buttons {
             display: grid;
             grid-template-columns: repeat(4, 1fr);
             grid-gap: 1px;
             background: #e0e0e0;
         }
         
         button {
             border: none;
             outline: none;
             padding: 20px;
             font-size: 1.2rem;
             cursor: pointer;
             background: white;
             transition: all 0.2s;
         }
         
         button:hover {
             background: #f0f0f0;
         }
         
         button:active {
             background: #e0e0e0;
         }
         
         .operator {
             background: #f8f9fa;
             color: #4285f4;
             font-weight: 500;
         }
         
         .equals {
             background: #4285f4;
             color: white;
             font-weight: 500;
             grid-column: span 1;
         }
         
         .span-two {
             grid-column: span 2;
         }
         
         .clear {
             color: #ea4335;
         }
         
         .delete {
             color: #fbbc05;
         }
     </style>
 </head>
 <body>
     <div class="calculator">
         <div class="display">
             <div class="previous-operand" id="previous-operand"></div>
             <div class="current-operand" id="current-operand">0</div>
         </div>
         <div class="buttons">
             <button class="clear span-two" data-action="clear">AC</button>
             <button class="delete" data-action="delete">DEL</button>
             <button class="operator" data-action="divide">÷</button>
             
             <button data-number>7</button>
             <button data-number>8</button>
             <button data-number>9</button>
             <button class="operator" data-action="multiply">×</button>
             
             <button data-number>4</button>
             <button data-number>5</button>
             <button data-number>6</button>
             <button class="operator" data-action="subtract">−</button>
             
             <button data-number>1</button>
             <button data-number>2</button>
             <button data-number>3</button>
             <button class="operator" data-action="add">+</button>
             
             <button data-number class="span-two">0</button>
             <button data-number>.</button>
             <button class="equals" data-action="calculate">=</button>
         </div>
     </div>
  
     <script>
         class Calculator {
             constructor(previousOperandTextElement, currentOperandTextElement) {
                 this.previousOperandTextElement = previousOperandTextElement;
                 this.currentOperandTextElement = currentOperandTextElement;
                 this.clear();
             }
  
             clear() {
                 this.currentOperand = '0';
                 this.previousOperand = '';
                 this.operation = undefined;
             }
  
             delete() {
                 this.currentOperand = this.currentOperand.toString().slice(0, -1);
                 if (this.currentOperand === '') {
                     this.currentOperand = '0';
                 }
             }
  
             appendNumber(number) {
                 if (number === '.' && this.currentOperand.includes('.')) return;
                 if (this.currentOperand === '0' && number !== '.') {
                     this.currentOperand = number.toString();
                 } else {
                     this.currentOperand = this.currentOperand.toString() + number.toString();
                 }
             }
  
             chooseOperation(operation) {
                 if (this.currentOperand === '') return;
                 if (this.previousOperand !== '') {
                     this.compute();
                 }
                 this.operation = operation;
                 this.previousOperand = this.currentOperand;
                 this.currentOperand = '';
             }
  
             compute() {
                 let computation;
                 const prev = parseFloat(this.previousOperand);
                 const current = parseFloat(this.currentOperand);
                 if (isNaN(prev) || isNaN(current)) return;
  
                 switch (this.operation) {
                     case '+':
                         computation = prev + current;
                         break;
                     case '−':
                         computation = prev - current;
                         break;
                     case '×':
                         computation = prev * current;
                         break;
                     case '÷':
                         computation = prev / current;
                         break;
                     default:
                         return;
                 }
  
                 this.currentOperand = computation.toString();
                 this.operation = undefined;
                 this.previousOperand = '';
             }
  
             getDisplayNumber(number) {
                 const stringNumber = number.toString();
                 const integerDigits = parseFloat(stringNumber.split('.')[0]);
                 const decimalDigits = stringNumber.split('.')[1];
                 let integerDisplay;
                 if (isNaN(integerDigits)) {
                     integerDisplay = '';
                 } else {
                     integerDisplay = integerDigits.toLocaleString('en', {
                         maximumFractionDigits: 0 
                     });
                 }
                 if (decimalDigits != null) {
                     return `${integerDisplay}.${decimalDigits}`;
                 } else {
                     return integerDisplay;
                 }
             }
  
             updateDisplay() {
                 this.currentOperandTextElement.innerText = this.getDisplayNumber(this.currentOperand);
                 if (this.operation != null) {
                     this.previousOperandTextElement.innerText = 
                         `${this.getDisplayNumber(this.previousOperand)} ${this.operation}`;
                 } else {
                     this.previousOperandTextElement.innerText = '';
                 }
             }
         }
  
         // 获取DOM元素 
         const numberButtons = document.querySelectorAll('[data-number]');
         const operationButtons = document.querySelectorAll('[data-action]');
         const equalsButton = document.querySelector('[data-action="calculate"]');
         const deleteButton = document.querySelector('[data-action="delete"]');
         const clearButton = document.querySelector('[data-action="clear"]');
         const previousOperandTextElement = document.getElementById('previous-operand');
         const currentOperandTextElement = document.getElementById('current-operand');
  
         // 创建计算器实例 
         const calculator = new Calculator(previousOperandTextElement, currentOperandTextElement);
  
         // 绑定事件监听器
         numberButtons.forEach(button => {
             button.addEventListener('click', () => {
                 calculator.appendNumber(button.innerText);
                 calculator.updateDisplay();
             });
         }); 
  
         operationButtons.forEach(button => {
             button.addEventListener('click', () => {
                 const action = button.getAttribute('data-action');
                 if (action === 'clear') {
                     calculator.clear();
                 } else if (action === 'delete') {
                     calculator.delete();
                 } else if (action === 'calculate') {
                     calculator.compute();
                 } else {
                     calculator.chooseOperation(button.innerText);
                 }
                 calculator.updateDisplay();
             });
         });
     </script>
 </body>
 </html>
